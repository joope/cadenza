<!doctype html>
<html>
  <head>
    <title>JUUH</title>
  </head>
  <body>
    <h2 id="otsikko"> MOI </h2>

    <audio id="A" src="glass_1.ogg" type="audio/ogg" preload="auto"></audio>
    <audio id="W" src="glass_2.ogg" type="audio/ogg" preload="auto"></audio>
    <audio id="S" src="glass_3.ogg" type="audio/ogg" preload="auto"></audio>
    <audio id="E" src="glass_4.ogg" type="audio/ogg" preload="auto"></audio>
    <audio id="D" src="glass_5.ogg" type="audio/ogg" preload="auto"></audio>
    <audio id="F" src="glass_6.ogg" type="audio/ogg" preload="auto"></audio>
    <audio id="T" src="glass_7.ogg" type="audio/ogg" preload="auto"></audio>
    <audio id="G" src="glass_8.ogg" type="audio/ogg" preload="auto"></audio>
    <audio id="Y" src="glass_9.ogg" type="audio/ogg" preload="auto"></audio>
    <audio id="H" src="glass_10.ogg" type="audio/ogg" preload="auto"></audio>
    <audio id="U" src="glass_11.ogg" type="audio/ogg" preload="auto"></audio>
    <audio id="J" src="glass_12.ogg" type="audio/ogg" preload="auto"></audio>
    <audio id="K" src="glass_13.ogg" type="audio/ogg" preload="auto"></audio>

    <script src="/socket.io/socket.io.js"></script>
    <script src="http://code.jquery.com/jquery-1.11.1.js"></script>
    <script>

    var socket = io();
    var pressed = true;
    var soittajia = 0;

    document.onkeyup = function toggle(){
      pressed = true;
    }

    document.onkeydown = function hello(k){
      if(pressed){
        var keynum = k.which;
        key = String.fromCharCode(keynum);
        socket.emit('painallus', key);
        pressed = false;
        return false;
      }
    }

    socket.on('soittajia', function(maara){
      document.getElementById("otsikko").innerHTML = "Käyttäjiä: " + maara;
    });

    socket.on('painallus', function(key){
      document.getElementById(key).play();
    });

    </script>
  </body>
</html>
